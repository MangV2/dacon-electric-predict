# 전력 사용량 예측 AI 시스템

## 프로젝트 개요
100개 건물의 시간대별 기상 데이터를 기반으로 전력 사용량을 예측하는 AI 시스템입니다. 건물 타입별 모델과 개별 건물 모델의 앙상블로 높은 정확도를 달성했습니다.

## 주요 기능
- **고급 피처 엔지니어링**: CDH, THI, WCT 등 전력 소비 관련 파생 특성 생성
- **도메인 특화 규칙**: 백화점 휴일 패턴 등 건물별 특수 규칙 적용
- **이중 앙상블**: 타입별 모델 + 개별 건물 모델 가중 결합 (70:30)
- **주기성 모델링**: Sin/Cos 변환으로 시간 주기성 반영

## 데이터

### 규모
- **건물**: 100개 (10개 유형)
- **훈련**: 203,932개 샘플 (2024.06~08, 시간별)
- **테스트**: 16,800개 샘플
- **센서**: 7개 (기온, 습도, 풍속 등)

### 건물 유형
Hotel(10), Commercial(10), Hospital(9), University(10), Department Store(16), IDC(9), Other Buildings(10), Apartment(9), Research Institute(9), Public(8)

## Feature Engineering

### 1. 시간 특성 (12개)
- 기본: hour, day, month, day_of_week
- 주기성: sin/cos 변환 8개 (시간, 날짜, 월, 요일)

### 2. 기상 파생 특성 (7개)
- **온도 통계**: 일별 최고/평균/최저/일교차
- **CDH**: 냉방 부하 지수 (누적 온도 - 26°C)
- **THI**: 온습도 지수
- **WCT**: 체감 온도

### 3. 휴일 특성 (1개)
- 국가 공휴일 + 백화점 개별 휴일 규칙

**백화점 특별 규칙 예시**
- 건물 18: 매주 일요일
- 건물 27,40,59,63: 홀수 주 일요일
- 건물 29: 매달 10일 + 5번째 주 일요일
- 건물 32: 홀수 주 월요일

### 4. 통계 특성 (4개)
- 건물별 시간대/요일 평균/표준편차 (Target Encoding)

**총 특성: 29개**

## 모델 아키텍처

### Model 1: 건물 타입별 모델
- 10개 건물 유형별 독립 XGBoost 모델
- 건물 번호 One-Hot Encoding 포함
- **CV SMAPE**: 3.0650

### Model 2: 개별 건물 모델
- 100개 건물 각각 독립 XGBoost 모델
- 건물 고유 패턴 학습
- **CV SMAPE**: 2.9426

### XGBoost 설정
- **Learning Rate**: 0.05
- **Estimators**: 5000 (Early Stopping: 100 rounds)
- **Max Depth**: 10
- **Subsample**: 0.7
- **Colsample Bytree**: 0.5
- **Objective**: Weighted MSE (과소예측에 3배 페널티)
- **교차 검증**: 7-Fold CV

### Ensemble
최종 예측값은 개별 건물 모델 70%와 타입별 모델 30%의 가중 평균으로 계산됩니다.

## 성능

| 모델 | CV SMAPE |
|------|----------|
| 타입별 모델 | 3.0650 |
| 개별 모델 | 2.9426 |
| **앙상블** | **2.8636** |


## 주요 개선

### 1. 백화점 휴일 모델링
16개 백화점 각각의 휴일 규칙 적용 → **13.7% 개선**

### 2. 기상 파생 지수
CDH, THI, WCT로 여름철 냉방 수요 예측 정확도 향상

### 3. 주기성 피처
Sin/Cos로 시간 연속성 표현 → 시간대 전환 안정화

### 4. Weighted Loss
과소 예측 3배 페널티로 전력 부족 예측 방지
